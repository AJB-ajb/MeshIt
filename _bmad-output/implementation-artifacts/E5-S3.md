# Story 5.3: Create Match API Routes

**Epic:** E5 - Matching Engine  
**Status:** ready-for-dev  
**Priority:** P0  
**Dependencies:** 5.1, 5.2  
**Blocks:** 5.4, 5.5

## Story

As a frontend,
I want API endpoints to fetch matches,
so that I can display match results to users.

## Acceptance Criteria

1. **Given** a GET request to /api/matches/for-me
   **When** user is authenticated
   **Then** projects matching their profile are returned

2. **Given** a GET request to /api/matches/for-project/[id]
   **When** user owns the project
   **Then** profiles matching that project are returned

3. **Given** a GET request to /api/matches/[id]
   **When** user is involved in the match
   **Then** full match details are returned

4. **Given** match results
   **When** returned from API
   **Then** each includes score and explanation (if generated)

## Tasks / Subtasks

- [ ] Task 1: Create GET /api/matches/for-me (AC: #1, #4)
  - [ ] Create `src/app/api/matches/for-me/route.ts`
  - [ ] Call matchProfileToProjects
  - [ ] Return matches with scores

- [ ] Task 2: Create GET /api/matches/for-project/[id] (AC: #2, #4)
  - [ ] Create `src/app/api/matches/for-project/[id]/route.ts`
  - [ ] Verify user owns project
  - [ ] Call matchProjectToProfiles
  - [ ] Return matches with scores

- [ ] Task 3: Create GET /api/matches/[id] (AC: #3, #4)
  - [ ] Create `src/app/api/matches/[id]/route.ts`
  - [ ] Fetch match by ID
  - [ ] Include related profile and project
  - [ ] Return full match details

## Dev Notes

- Matches can be computed on-demand or pre-computed
- Consider caching for frequently accessed matches
- Include pagination for large result sets

### API Specification

```typescript
// GET /api/matches/for-me
{
  matches: {
    id: string;
    project: Project;
    score: number;
    explanation?: string;
  }[]
}

// GET /api/matches/for-project/[id]
{
  matches: {
    id: string;
    profile: Profile;
    score: number;
    explanation?: string;
  }[]
}

// GET /api/matches/[id]
{
  match: {
    id: string;
    profile: Profile;
    project: Project;
    score: number;
    explanation?: string;
    created_at: string;
  }
}
```

### References

- [Source: planning-artifacts/architecture.md#API Routes Specification]

## Dev Agent Record

### Agent Model Used

### Debug Log References

### Completion Notes List

### File List
