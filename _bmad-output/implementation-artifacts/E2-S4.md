# Story 2.4: Create Profile Merger

**Epic:** E2 - GitHub Enrichment  
**Status:** ready-for-dev  
**Priority:** P1  
**Dependencies:** 2.3, E3-S1 (Gemini extraction)  
**Blocks:** 2.6

## Story

As a system,
I want to merge GitHub data with text profile data,
so that the user has a complete, enriched profile.

## Acceptance Criteria

1. **Given** GitHub extracted skills and text profile skills
   **When** I merge profiles
   **Then** skills are combined and deduplicated
   **And** GitHub skills are added to existing skills

2. **Given** GitHub experience level and text profile experience
   **When** I merge profiles
   **Then** the higher experience level is used

3. **Given** GitHub topics and text profile interests
   **When** I merge profiles
   **Then** interests are combined and deduplicated

4. **Given** only GitHub data (no text profile)
   **When** I merge profiles
   **Then** GitHub data is used as the base profile

## Tasks / Subtasks

- [ ] Task 1: Create merger function (AC: #1, #2, #3)
  - [ ] Create `src/lib/github/merger.ts`
  - [ ] Implement skill merging with deduplication
  - [ ] Implement experience level comparison
  - [ ] Implement interest merging

- [ ] Task 2: Handle edge cases (AC: #4)
  - [ ] Handle null/undefined text profile
  - [ ] Handle empty GitHub data
  - [ ] Preserve user-edited fields

## Dev Notes

- Text profile takes precedence for user-edited fields
- GitHub data supplements, doesn't override
- Deduplication should be case-insensitive

### Code Structure

```typescript
// src/lib/github/merger.ts
import { StructuredProfile } from '@/lib/ai/types';
import { GitHubProfileData } from './inference';

export function mergeProfiles(
  textProfile: StructuredProfile | null,
  githubData: GitHubProfileData | null
): StructuredProfile
```

### References

- [Source: planning-artifacts/architecture.md#Merging GitHub Data]

## Dev Agent Record

### Agent Model Used

### Debug Log References

### Completion Notes List

### File List
