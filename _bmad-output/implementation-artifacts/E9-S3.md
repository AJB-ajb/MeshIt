# Story 9.3: Build Voice Conversation Flow

**Epic:** E9 - Voice Agent (POST-MVP)  
**Status:** post-mvp  
**Priority:** P2  
**Dependencies:** 9.1, 9.2  
**Blocks:** 9.4

## Story

As a system,
I want a conversation flow that guides users through profile creation,
so that the voice agent can collect profile information naturally.

## Acceptance Criteria

1. **Given** a new user
   **When** they start voice onboarding
   **Then** the agent greets them and asks first question

2. **Given** a user response
   **When** the agent processes it
   **Then** it extracts relevant information
   **And** asks appropriate follow-up

3. **Given** 4-5 interactions
   **When** the conversation completes
   **Then** a complete profile is assembled

4. **Given** unclear responses
   **When** the agent can't understand
   **Then** it asks for clarification politely

## Tasks / Subtasks

- [ ] Task 1: Design conversation flow
  - [ ] Define question sequence
  - [ ] Define follow-up logic
  - [ ] Define completion criteria

- [ ] Task 2: Create conversation state machine
  - [ ] Create `src/lib/voice/conversation.ts`
  - [ ] Track conversation state
  - [ ] Handle state transitions

- [ ] Task 3: Integrate with AI extraction
  - [ ] Use Gemini to understand responses
  - [ ] Extract structured data from conversation
  - [ ] Build profile progressively

## Dev Notes

- Conversation should feel natural, not robotic
- 4-5 questions: skills, experience, availability, interests, collaboration style
- Use LLM for flexible response understanding

### Conversation Flow

```
Agent: "Hi! I'm here to help set up your profile. What programming languages or technologies do you work with?"

User: "I mainly do React and TypeScript, some Node.js too"

Agent: "Great! React, TypeScript, and Node.js. How many years have you been coding?"

User: "About 5 years now"

Agent: "Nice experience! How many hours per week are you looking to contribute to projects?"

User: "Maybe 10-15 hours, I have a full-time job"

Agent: "Got it, part-time commitment. What kind of projects interest you?"

User: "AI stuff, startups, anything innovative"

Agent: "Perfect! Last question - do you prefer working synchronously with video calls, or async with messages?"

User: "Flexible, either works for me"

Agent: "Awesome! I've created your profile. You can review and edit it anytime."
```

### References

- [Source: planning-artifacts/architecture.md#Voice Agent Flow]

## Dev Agent Record

### Agent Model Used

### Debug Log References

### Completion Notes List

### File List
