# Story 2.2: Create Repo/Language Extraction

**Epic:** E2 - GitHub Enrichment  
**Status:** ready-for-dev  
**Priority:** P1  
**Dependencies:** 2.1  
**Blocks:** 2.3

## Story

As a system,
I want to extract programming languages from repos,
so that I know what technologies the user works with.

## Acceptance Criteria

1. **Given** a list of user repos
   **When** I run extractLanguages()
   **Then** I get the top 5 languages sorted by total bytes
   **And** fork repos are excluded from analysis

2. **Given** repos with topics/tags
   **When** I run extractTopics()
   **Then** I get unique topics across all repos
   **And** duplicates are removed

3. **Given** repo data
   **When** I run extractStats()
   **Then** I get total repo count (excluding forks)
   **And** I get total star count

## Tasks / Subtasks

- [ ] Task 1: Implement language extraction (AC: #1)
  - [ ] Create `src/lib/github/extractor.ts`
  - [ ] Filter out forked repos
  - [ ] Aggregate language bytes across repos
  - [ ] Sort and return top 5

- [ ] Task 2: Implement topic extraction (AC: #2)
  - [ ] Collect topics from all repos
  - [ ] Deduplicate
  - [ ] Return as array

- [ ] Task 3: Implement stats extraction (AC: #3)
  - [ ] Count non-fork repos
  - [ ] Sum star counts
  - [ ] Return stats object

## Dev Notes

- Only analyze non-fork repos for accurate skill assessment
- Limit to top 20 repos by update date to avoid API rate limits
- Languages are returned as bytes, convert to percentages if needed

### Code Structure

```typescript
// src/lib/github/extractor.ts
export interface GitHubExtraction {
  primaryLanguages: string[];
  topics: string[];
  repoCount: number;
  totalStars: number;
}

export async function extractGitHubData(
  accessToken: string,
  username: string
): Promise<GitHubExtraction>
```

### References

- [Source: planning-artifacts/architecture.md#Profile Extractor]

## Dev Agent Record

### Agent Model Used

### Debug Log References

### Completion Notes List

### File List
