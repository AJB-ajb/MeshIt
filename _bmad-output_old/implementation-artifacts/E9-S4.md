# Story 9.4: Create Voice Onboarding UI

**Epic:** E9 - Voice Agent (POST-MVP)  
**Status:** post-mvp  
**Priority:** P2  
**Dependencies:** 9.3  
**Blocks:** None

## Story

As a user,
I want a voice interface for creating my profile,
so that I can speak instead of typing.

## Acceptance Criteria

1. **Given** I am on the onboarding page
   **When** I choose voice option
   **Then** I see a voice interface with record button

2. **Given** the voice interface
   **When** I click record
   **Then** my microphone activates
   **And** I see visual feedback that it's listening

3. **Given** I finish speaking
   **When** I stop recording
   **Then** the agent responds with audio
   **And** the conversation continues

4. **Given** the conversation
   **When** I view the screen
   **Then** I see a transcript of the conversation

## Tasks / Subtasks

- [ ] Task 1: Create voice onboarding page
  - [ ] Create `src/app/(protected)/onboarding/voice/page.tsx`
  - [ ] Add choice between text and voice onboarding

- [ ] Task 2: Build voice interface
  - [ ] Create `src/components/voice/voice-recorder.tsx`
  - [ ] Implement microphone access
  - [ ] Show recording state visually

- [ ] Task 3: Build conversation display
  - [ ] Show transcript as conversation bubbles
  - [ ] Auto-scroll to latest message
  - [ ] Show agent "speaking" state

- [ ] Task 4: Integrate audio playback
  - [ ] Play agent responses
  - [ ] Handle audio queue
  - [ ] Allow interruption

## Dev Notes

- Use Web Audio API for recording
- Request microphone permission
- Provide fallback to text if mic unavailable

### UI Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Voice Onboarding                â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ¤– Hi! What technologies do you   â”‚  â”‚
â”‚  â”‚    work with?                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    I mainly do    â”‚  â”‚
â”‚  â”‚                    React and TS   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ¤– Great! How many years of       â”‚  â”‚
â”‚  â”‚    experience?                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚              â”‚   ğŸ¤    â”‚                â”‚
â”‚              â”‚  Hold   â”‚                â”‚
â”‚              â”‚to speak â”‚                â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                         â”‚
â”‚  [Switch to text input]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### References

- [Source: planning-artifacts/architecture.md#Voice Agent UI]

## Dev Agent Record

### Agent Model Used

### Debug Log References

### Completion Notes List

### File List
