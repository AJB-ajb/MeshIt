# Story 3.3: Create Profile Extraction API Route

**Epic:** E3 - Profile Management  
**Status:** ready-for-dev  
**Priority:** P0  
**Dependencies:** 3.1, E1-S10  
**Blocks:** 3.5

## Story

As a frontend,
I want an API endpoint that extracts profile from text,
so that the onboarding page can get structured data.

## Acceptance Criteria

1. **Given** a POST request with `{ description: "..." }`
   **When** I call /api/profile/extract
   **Then** I get structured profile JSON back

2. **Given** an unauthenticated request
   **When** I call the endpoint
   **Then** I get 401 Unauthorized

3. **Given** an empty or missing description
   **When** I call the endpoint
   **Then** I get 400 Bad Request with error message

## Tasks / Subtasks

- [ ] Task 1: Create extraction route (AC: #1)
  - [ ] Create `src/app/api/profile/extract/route.ts`
  - [ ] Accept POST with description body
  - [ ] Call extractProfile from AI service
  - [ ] Return structured JSON

- [ ] Task 2: Add authentication check (AC: #2)
  - [ ] Get user from Supabase session
  - [ ] Return 401 if not authenticated

- [ ] Task 3: Add validation (AC: #3)
  - [ ] Validate description is present
  - [ ] Validate description is string
  - [ ] Return 400 with helpful error

## Dev Notes

- Use Supabase server client for auth check
- Rate limiting can be added later
- Log extraction time for monitoring

### API Specification

```typescript
// POST /api/profile/extract
// Request
{
  description: string; // "I'm a React developer with 5 years..."
}

// Response 200
{
  skills: string[];
  experience_level: 'beginner' | 'intermediate' | 'advanced';
  availability_hours: number;
  interests: string[];
  collaboration_style: 'sync' | 'async' | 'flexible';
}

// Response 401
{ error: 'Unauthorized' }

// Response 400
{ error: 'Description is required' }
```

### References

- [Source: planning-artifacts/architecture.md#API Routes Specification]

## Dev Agent Record

### Agent Model Used

### Debug Log References

### Completion Notes List

### File List
