# Story 2.1: Implement GitHub API Client

**Epic:** E2 - GitHub Enrichment  
**Status:** ready-for-dev  
**Priority:** P1  
**Dependencies:** E1-S6 (GitHub OAuth configured)  
**Blocks:** 2.2

## Story

As a developer,
I want a GitHub API client that fetches user repos,
so that I can analyze their coding profile.

## Acceptance Criteria

1. **Given** a valid GitHub access token
   **When** I call fetchUserRepos()
   **Then** it returns the user's public repos (up to 100)
   **And** includes repo name, language, stars, topics

2. **Given** a valid GitHub access token
   **When** I call fetchRepoLanguages()
   **Then** it returns language breakdown for a specific repo
   **And** includes bytes per language

3. **Given** an invalid or expired token
   **When** I call any API function
   **Then** it returns an appropriate error
   **And** does not throw unhandled exceptions

4. **Given** rate limiting
   **When** API calls approach the limit
   **Then** the client handles 403 responses gracefully

## Tasks / Subtasks

- [ ] Task 1: Create GitHub API client (AC: #1, #2)
  - [ ] Create `src/lib/github/api.ts`
  - [ ] Implement fetchUserRepos function
  - [ ] Implement fetchRepoLanguages function
  - [ ] Add proper TypeScript types

- [ ] Task 2: Add error handling (AC: #3, #4)
  - [ ] Handle 401 unauthorized
  - [ ] Handle 403 rate limit
  - [ ] Handle network errors
  - [ ] Return typed error responses

- [ ] Task 3: Test API client
  - [ ] Test with valid token
  - [ ] Test error scenarios

## Dev Notes

- GitHub API base URL: `https://api.github.com`
- Access token from OAuth stored in Supabase session
- Rate limit: 5000 requests/hour with token

### Code Structure

```typescript
// src/lib/github/api.ts
export interface GitHubRepo {
  name: string;
  language: string | null;
  stargazers_count: number;
  fork: boolean;
  description: string | null;
  topics: string[];
}

export async function fetchUserRepos(accessToken: string): Promise<GitHubRepo[]>
export async function fetchRepoLanguages(accessToken: string, owner: string, repo: string): Promise<Record<string, number>>
```

### References

- [Source: planning-artifacts/architecture.md#7. GitHub Profile Enrichment]
- GitHub REST API documentation

## Dev Agent Record

### Agent Model Used

### Debug Log References

### Completion Notes List

### File List
