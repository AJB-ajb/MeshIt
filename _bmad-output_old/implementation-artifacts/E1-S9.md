# Story 1.9: Configure Discord OAuth

**Epic:** E1 - Foundation  
**Status:** ready-for-dev  
**Priority:** P0  
**Dependencies:** 1.3  
**Blocks:** 1.10

## Story

As a user,
I want to sign in with Discord,
so that I can quickly create an account and share my Discord for collaboration.

## Acceptance Criteria

1. **Given** I am on the login page
   **When** I click "Sign in with Discord"
   **Then** I am redirected to Discord OAuth consent screen

2. **Given** I approve the OAuth request
   **When** Discord redirects back
   **Then** I am authenticated in the app
   **And** my session is created

3. **Given** successful authentication
   **When** I check Supabase
   **Then** a user record exists in auth.users
   **And** my Discord username is stored in metadata

## Tasks / Subtasks

- [ ] Task 1: Set up Discord Application (AC: #1)
  - [ ] Go to Discord Developer Portal → New Application
  - [ ] Go to OAuth2 settings
  - [ ] Add Redirect URL to Supabase callback
  - [ ] Note Client ID and Client Secret

- [ ] Task 2: Configure Supabase Auth (AC: #1, #2)
  - [ ] Go to Supabase Dashboard → Authentication → Providers
  - [ ] Enable Discord provider
  - [ ] Enter Client ID and Client Secret
  - [ ] Save configuration

- [ ] Task 3: Test OAuth flow (AC: #2, #3)
  - [ ] Create login button for Discord
  - [ ] Test full OAuth flow
  - [ ] Verify user created with Discord data

## Dev Notes

- Discord is a native Supabase provider (not OIDC)
- Discord username format: `username#discriminator` or just `username`
- Consider storing Discord ID for easy server invites

### Code Example

```typescript
const { data, error } = await supabase.auth.signInWithOAuth({
  provider: 'discord',
  options: {
    redirectTo: `${window.location.origin}/auth/callback`
  }
})
```

### References

- [Source: planning-artifacts/prd.md#Auth providers]
- Discord OAuth documentation

## Dev Agent Record

### Agent Model Used

### Debug Log References

### Completion Notes List

### File List
