# .agents

AI agent instructions for the Mesh codebase.

## Quick Reference

- **Stack**: Next.js 16, React 19, TypeScript, Tailwind CSS 4, Supabase, shadcn/ui
- **Package Manager**: pnpm (required)
- **Dev Server**: `pnpm dev`
- **Tests**: `pnpm test` (unit), `pnpm test:e2e` (E2E)
- **Add UI Components**: `pnpm dlx shadcn@latest add [component]`

## Build Requirements

### Pre-Deployment Testing
Always run `pnpm build` before deploying to catch build-time errors:

```bash
pnpm build
```

### Suspense Boundaries
- `useSearchParams()` must be wrapped in `<Suspense>` to avoid build errors
- Extract component using `useSearchParams()` into separate component, wrap default export with Suspense
- Example: `onboarding/page.tsx`, `onboarding/developer/page.tsx`

## Supabase CLI

```bash
# Link to project (one-time setup)
supabase link --project-ref YOUR_PROJECT_REF

# Create migration
supabase migration new migration_name

# Apply migrations to remote database
supabase db push

# Check migration status
supabase migration list

# Pull remote schema changes
supabase db pull

When updating database model, update `docs/DATA_MODEL.md`!
Keep legacy data columns for compatibility.

```

## Key Directories

- `src/app/` - Next.js App Router pages and API routes
- `src/components/` - React components (layout, ui, match, project)
- `src/lib/` - Utilities (supabase, matching, ai)
- `docs/` - Project documentation
- `docs/DATA_MODEL.md` - Data model documentation
- `supabase/migrations/` - SQL migration files
- `_bmad-output/` - Planning and implementation specs
